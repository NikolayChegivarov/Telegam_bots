# Телеграм-бот для взаимодействия исполнителя и его клиентов

Этот телеграм-бот предназначен для управления задачами между клиентами и исполнителем.  
Бот позволяет клиентам ставить задачи, отслеживать их статус, а администратору — управлять задачами,  
изменять их статус и удалять задачи.

## Основные функции бота

### Для клиентов:
- **Регистрация**: Клиент может зарегистрироваться в системе, указав свои данные (организация, имя, фамилия, контактный телефон).
- **Постановка задач**: Клиент может поставить задачу, которая будет отправлена исполнителю.
- **Просмотр задач**: Клиент может просматривать список своих задач и их текущий статус.
- **Уведомления**: Клиент получает уведомления об изменении статуса задачи.

### Для исполнителя:
- **Управление доступом**: Исполнитель может одобрить или отклонить запрос на доступ нового пользователя.
- **Просмотр задач**: Исполнитель может просматривать все задачи, поставленные клиентами, получает уведомления об их поступлении.
- **Изменение статуса задач**: Исполнитель может изменять статус задачи (например, "В работе", "Сделано").
- **Задачи со статусом "Сделано"** автоматически удаляются из просмотра.
- **Удаление задач**: Исполнитель может удалять задачи.

## Установка

Убедитесь, что у вас установлены все необходимые зависимости. Для этого выполните команду:

```bash
pip install -r requirements.txt
```

Или установите зависимости вручную:
```bash
pip install pyTelegramBotAPI  
pip install python-dotenv  
pip install psycopg2-binary  
pip3 install prettytable  
```
Создайте файл .env в корневой директории проекта и добавьте в него следующие переменные:

TELEGRAM_TOKEN_BO
HOST
USER
PASSWORD_DB=1171
PORT
NAME_DB
ADMIN
export PAYMENT_PROVIDER_TOKEN

Запустите бота с помощью команды:
```bash
python main.py
```


## Использование

### Регистрация нового пользователя:
1. Пользователь отправляет любое сообщение боту.
2. Если пользователь не зарегистрирован, бот запросит у исполнителя разрешение на доступ.
3. После одобрения исполнителем, пользователь должен ввести свои данные:
   - Организация
   - Имя
   - Фамилия
   - Телефон

### Постановка задачи:
1. После регистрации пользователь может поставить задачу, выбрав соответствующую команду в меню.
2. Задача будет отправлена исполнителю для выполнения.

### Просмотр задач:
1. Пользователь и исполнитель могут просматривать список задач, используя соответствующую команду в меню.

### Изменение статуса задачи:
1. Исполнитель может изменить статус задачи, выбрав соответствующую команду и указав номер задачи.

### Удаление задачи:
1. Исполнитель может удалить задачу, выбрав соответствующую команду и указав номер задачи.

## Структура базы данных

База данных состоит из двух основных таблиц:

### Таблица `users`:
- `id_user_telegram` (INT): Уникальный идентификатор пользователя в Telegram.
- `first_name` (TEXT): Имя пользователя.
- `last_name` (TEXT): Фамилия пользователя.
- `organization` (TEXT): Организация пользователя.
- `phone` (TEXT): Контактный телефон пользователя.
- `user_status` (TEXT): Статус пользователя (например, активен/неактивен).

### Таблица `tasks`:
- `id_task` (INT): Уникальный идентификатор задачи.
- `author` (INT): Идентификатор пользователя, поставившего задачу.
- `task_text` (TEXT): Текст задачи.
- `task_status` (TEXT): Статус задачи (например, "Поставлена", "В работе", "Сделано").
- `created_at` (TIMESTAMP): Время создания задачи.